/*! jQuery Field Compare String (jFieldCompareString) v1.0.2 - Licensed under the MIT license - Copyright (c) 2017 Luis Luz - UXD Lda <dev@uxd.pt> / Project home: https://github.com/lluz/jquery-field-compare-string */
!function(a,b,c,d){a.fn.jFieldCompareString=function(b){function c(a,b){return 0===a.indexOf(b)}function d(b){var c=a.trim(b);return c=c.replace(/[\t\n]+/g," ").replace(/ +(?= )/g,"").replace(/[´`~^¨<>«»]/g,"")}function e(){var b=a(".jfcs-field-protection");clearTimeout(h),b.addClass("jfcs-protecting")}function f(){var b=a(".jfcs-field-protection");h=setTimeout(function(){b.removeClass("jfcs-protecting")},100)}function g(b,e,f){var g=a("#"+b),h=g.val(),i=d(h),j=g.closest(".jfcs-wrapper"),k=g.parent(".jfcs-field"),l=j.find(".jfcs-validation"),m=l.find(".jfcs-validation-msg-notok"),n=l.find(".jfcs-validation-msg-incomplete"),o=l.find(".jfcs-validation-msg-ok");f?(m.hide(),n.fadeIn(),o.hide(),k.addClass("jfcs-field-validation-error").removeClass("jfcs-field-validation-success")):i===e?(m.hide(),n.hide(),o.fadeIn(),k.removeClass("jfcs-field-validation-error").addClass("jfcs-field-validation-success")):i.length?e.search(i)!==-1&&c(e,i)?(m.hide(),n.hide(),o.hide(),k.removeClass("jfcs-field-validation-error jfcs-field-validation-success")):(m.fadeIn(),n.hide(),o.hide(),k.addClass("jfcs-field-validation-error").removeClass("jfcs-field-validation-success")):(m.hide(),n.hide(),o.hide(),k.removeClass("jfcs-field-validation-error jfcs-field-validation-success"))}if(void 0===this||0===this.length||this.length>1)return console.log('jquery.jFieldCompareString() INITIALIZATION ERROR: This is a 1:1 plugin initialization. You need to select only one input/textarea and declare the reference text element with the options property "compare_to". See documentation form more information.'),!1;var h,i=this.eq(0),j=i.closest(".jfcs-field"),k=i.closest(".jfcs-wrapper"),l=k.find(".jfcs-reference").eq(0),m={compare_to:l,field_protection:!1,msg_notok:"Your transcript has an error, please correct.",msg_incomplete:"Your transcript is incomplete, please correct.",msg_ok:"Your transcript is correct."},n=m.msg_notok,o=m.msg_incomplete,p=m.msg_ok;if(b){if(void 0!==b.msg_notok&&""!==a.trim(b.msg_notok)&&(n=b.msg_notok),void 0!==b.msg_incomplete&&""!==a.trim(b.msg_incomplete)&&(o=b.msg_incomplete),void 0!==b.msg_ok&&""!==a.trim(b.msg_ok)&&(p=b.msg_ok),void 0===b.compare_to)l=m.compare_to;else{var q=a(b.compare_to);if(!q.length)return console.log('jquery.jFieldCompareString() INITIALIZATION ERROR: You need to declare the reference text element with the options property "compare_to". See documentation form more information.'),!1;l=q}void 0!==b.field_protection&&b.field_protection&&(i.on("contextmenu",function(){return!1}).on("keydown",function(a){220!==a.which&&226!==a.which&&221!==a.which||a.preventDefault()}).bind("cut copy paste",function(a){a.preventDefault()}),j.addClass("jfcs-field-protection").on("dragover",e).on("dragleave",f)),a.extend(m,b)}k.append('<div class="jfcs-validation"><div class="jfcs-validation-msg jfcs-validation-msg-error jfcs-validation-msg-notok">'+n+'</div><div class="jfcs-validation-msg jfcs-validation-msg-error jfcs-validation-msg-incomplete">'+o+'</div><div class="jfcs-validation-msg jfcs-validation-msg-success jfcs-validation-msg-ok">'+p+"</div></div>"),i.on("keyup",function(){g(a(this).attr("id"),d(l.text()))}).on("focus",function(){g(a(this).attr("id"),d(l.text()))}).on("blur",function(){var b=a(this).attr("id"),e=a(this).val(),h=d(e),i=l,j=d(i.text());a(this).val(a.trim(e.replace(/ +(?= )/g,"").replace(/[<>«»]/g,"").replace(/(?:(?:\r\n|\r|\n)\s*){2}/gm,""))),f(),j.search(h)!==-1&&c(j,h)&&h!==j?g(b,"",!0):g(b,j)})}}(jQuery,window,document);